# Бот Игорь - Система распределения заявок Telegram

Телеграм-бот для автоматического сбора и распределения заявок между пользователями в зависимости от категории, города и подписок.

## Основные функции

- Интеграция с Telegram для сбора заявок из указанных чатов
- Алгоритм распределения заявок между пользователями с настраиваемыми интервалами
- Админ-панель для управления категориями, городами, лимитами и статусами заявок
- Демо-режим для тестирования с генерацией случайных заявок
- Статистика по заявкам и пользователям

## Установка и запуск

1. Клонировать репозиторий:
```bash
git clone https://github.com/robinso1/botigor2.git
cd botigor2
```

2. Создать и активировать виртуальное окружение:
```bash
python -m venv .venv
source .venv/bin/activate  # для Linux/Mac
# или
.venv\Scripts\activate  # для Windows
```

3. Установить зависимости:
```bash
pip install -r requirements.txt
```

4. Настроить переменные окружения в файле `.env`:
```
TELEGRAM_BOT_TOKEN=ваш_токен_бота
GITHUB_TOKEN=ваш_токен_github
ADMIN_IDS=[id1,id2]
DATABASE_URL=sqlite:///./bot.db
SECRET_KEY=ваш_секретный_ключ
DEMO_MODE=False
```

5. Запустить миграции базы данных:
```bash
alembic upgrade head
```

6. Запустить бота:
```bash
python main.py
```

## Структура проекта

- `main.py` - точка входа в приложение
- `bot/` - основной код бота
  - `handlers/` - обработчики команд и сообщений
  - `models/` - модели данных
  - `services/` - бизнес-логика
  - `utils/` - вспомогательные функции
- `admin/` - код админ-панели
- `migrations/` - миграции базы данных
- `config.py` - конфигурация приложения

## Администрирование

Доступ к админ-панели имеют только пользователи с ID, указанными в переменной окружения `ADMIN_IDS`.

## Лицензия

Проект разработан для частного использования. 